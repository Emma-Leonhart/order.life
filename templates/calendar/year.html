{% extends "base.html" %}
{% block title %}{{ display_year }} {{ t.gaian_era_abbrev }} — {{ t.calendar_page.title }}{% endblock %}
{% block meta_description %}Full-year Gaian calendar for {{ display_year }} {{ t.gaian_era_abbrev }} with Gregorian dates and Gaiad chapters.{% endblock %}
{% block og_title %}{{ display_year }} {{ t.gaian_era_abbrev }} — {{ t.calendar_page.title }}{% endblock %}
{% block og_description %}Full-year Gaian calendar for {{ display_year }} {{ t.gaian_era_abbrev }} with Gregorian dates and Gaiad chapters.{% endblock %}
{% block twitter_title %}{{ display_year }} {{ t.gaian_era_abbrev }} — {{ t.calendar_page.title }}{% endblock %}
{% block twitter_description %}Full-year Gaian calendar for {{ display_year }} {{ t.gaian_era_abbrev }} with Gregorian dates and Gaiad chapters.{% endblock %}

{% block head %}
<script>const GAIAN_YEAR = {{ display_year }};</script>
<style>
/* ── Year calendar ── */
.year-cal-wrap { overflow-x: auto; margin: 1.5rem 0; }

.gaian-year-table {
  border-collapse: collapse;
  font-size: 0.78rem;
  min-width: 680px;
  width: 100%;
  table-layout: fixed;
}
.gaian-year-table th,
.gaian-year-table td {
  border: 1px solid var(--border);
  padding: 3px 2px;
  text-align: center;
  white-space: nowrap;
}
.gyear-month-hdr {
  text-align: left;
  padding-left: 8px;
  font-weight: bold;
  color: var(--accent);
  font-size: 0.72rem;
  white-space: nowrap;
  width: 10%;
}
/* Weekday header links */
.gaian-year-table thead a {
  color: inherit;
  text-decoration: none;
  display: block;
  font-size: 0.7rem;
}
.gaian-year-table thead a:hover { color: var(--link); }
th.gyear-sab { background: rgba(255,215,0,0.10); color: var(--accent); }
td.gyear-sab { background: rgba(255,215,0,0.06); }
.gyear-easter { background: rgba(255,100,30,0.35) !important; font-weight: bold; }
td.gyear-empty { background: rgba(0,0,0,0.18); }
.gaian-year-table tbody a {
  color: inherit;
  text-decoration: none;
  display: block;
}
.gaian-year-table tbody a:hover { text-decoration: underline; color: var(--link); }

/* Prose intro */
.year-intro { margin: 1rem 0 0.5rem; line-height: 1.7; }
.year-intro p { margin: 0.3rem 0; }
.year-nav { margin-top: 0.6rem; font-size: 0.9rem; color: var(--text-muted); }
.year-nav a { color: var(--link); }
</style>
{% endblock %}

{% block content %}
<div class="section-hero">
  <h1 id="year-heading">{{ display_year }} {{ t.gaian_era_abbrev }}</h1>
  <p id="year-subheading" style="color:var(--text-muted);font-size:0.9rem">{{ t.gaian_era }} · Gregorian {{ display_year - 10000 }}</p>
</div>

<div class="container">
  <div class="breadcrumb">
    <a href="{{ base }}/">{{ t.nav.home }}</a>
    <span>›</span>
    <a href="{{ base }}/calendar/">{{ t.nav.calendar }}</a>
    <span>›</span>
    {{ display_year }}
  </div>

  <div id="year-intro" class="year-intro">
    <p style="color:var(--text-muted)">Loading…</p>
  </div>

  <div id="year-calendar"></div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/year-page.js"></script>
{% endblock %}
